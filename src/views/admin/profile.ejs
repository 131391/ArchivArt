<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100">
    <!-- Header Section -->
    <div class="relative overflow-hidden bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 rounded-2xl shadow-2xl mb-8">
        <div class="absolute inset-0 bg-black opacity-10"></div>
        <div class="relative px-8 py-12">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-6">
                    <div class="relative">
                        <div class="absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full blur-lg opacity-75"></div>
                        <img id="profileImage" class="relative h-24 w-24 rounded-full border-4 border-white shadow-xl" 
                             src="<%= user.profile_picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.name) + '&background=8b5cf6&color=ffffff&size=128&bold=true' %>" 
                             alt="<%= user.name %>">
                        <div class="absolute -bottom-1 -right-1 h-6 w-6 bg-green-400 border-2 border-white rounded-full"></div>
                    </div>
                    <div>
                        <h1 class="text-4xl font-bold text-white mb-2"><%= user.name %></h1>
                        <p class="text-blue-100 text-lg mb-3"><%= user.email %></p>
                        <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-white bg-opacity-20 text-white backdrop-blur-sm border border-white border-opacity-30">
                            <i class="fas fa-crown mr-2 text-yellow-300"></i>
                            <%= (user.role_display_name || user.role).charAt(0).toUpperCase() + (user.role_display_name || user.role).slice(1) %>
                        </span>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-blue-100 text-sm">Member since</p>
                    <p class="text-white text-lg font-semibold">
                        <% if (user && user.created_at) { %>
                            <%= new Date(user.created_at).toLocaleDateString() %>
                        <% } else { %>
                            N/A
                        <% } %>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Profile Information Card -->
        <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 overflow-hidden hover:shadow-2xl transition-all duration-300">
            <div class="bg-gradient-to-r from-purple-500 to-indigo-500 px-6 py-4">
                <h2 class="text-xl font-bold text-white flex items-center">
                    <i class="fas fa-user-edit mr-3"></i>
                    Profile Information
                </h2>
            </div>
            
            <div class="p-6">
                <form action="/admin/profile" method="POST" class="space-y-6">
                    <div class="grid grid-cols-1 gap-6">
                        <div class="group">
                            <label for="name" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center">
                                <i class="fas fa-user mr-2 text-purple-500"></i>Full Name
                            </label>
                            <div class="relative">
                                <input type="text" name="name" id="name" 
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white"
                                       value="<%= user.name %>" required>
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                    <i class="fas fa-edit text-gray-400 group-hover:text-purple-500 transition-colors"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="group">
                            <label for="email" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center">
                                <i class="fas fa-envelope mr-2 text-blue-500"></i>Email Address
                            </label>
                            <div class="relative">
                                <input type="email" name="email" id="email" 
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white"
                                       value="<%= user.email %>" required>
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                    <i class="fas fa-at text-gray-400 group-hover:text-blue-500 transition-colors"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Account Stats -->
                    <div class="bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-4 border border-gray-100">
                        <h3 class="text-sm font-semibold text-gray-700 mb-3 flex items-center">
                            <i class="fas fa-info-circle mr-2 text-indigo-500"></i>Account Details
                        </h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center">
                                <p class="text-xs text-gray-500 uppercase tracking-wide">Role</p>
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-800 border border-purple-200">
                                    <i class="fas fa-shield-alt mr-1"></i>
                                    <%= user.role_display_name || user.role %>
                                </span>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-gray-500 uppercase tracking-wide">Status</p>
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Active
                                </span>
                            </div>
                        </div>
                    </div>

                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center">
                        <i class="fas fa-save mr-2"></i>
                        Update Profile
                    </button>
                </form>
            </div>
        </div>

        <!-- Profile Picture Upload Card -->
        <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 overflow-hidden hover:shadow-2xl transition-all duration-300">
            <div class="bg-gradient-to-r from-indigo-500 to-purple-500 px-6 py-4">
                <h2 class="text-xl font-bold text-white flex items-center">
                    <i class="fas fa-camera mr-3"></i>
                    Profile Picture
                </h2>
            </div>
            
            <div class="p-6">
                <div class="flex items-center space-x-6 mb-6">
                    <div class="relative">
                        <img id="currentProfileImage" class="h-20 w-20 rounded-full border-4 border-gray-200 shadow-lg" 
                             src="<%= user.profile_picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.name) + '&background=6366f1&color=ffffff&size=80&bold=true' %>" 
                             alt="Current Profile Picture"
                             data-original-src="<%= user.profile_picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(user.name) + '&background=6366f1&color=ffffff&size=80&bold=true' %>">
                    </div>
                    <div class="flex-1">
                        <h3 class="text-lg font-semibold text-gray-900 mb-2">Update Profile Picture</h3>
                        <p class="text-sm text-gray-600 mb-4">Choose a new profile picture. Supported formats: JPEG, PNG, WebP (max 5MB)</p>
                        
                        <div class="flex items-center space-x-4">
                            <label for="profilePictureInput" class="cursor-pointer inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
                                <i class="fas fa-upload mr-2"></i>
                                Choose File
                            </label>
                            <input type="file" id="profilePictureInput" accept="image/jpeg,image/jpg,image/png,image/webp" class="hidden">
                            <button id="uploadProfilePicture" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                <i class="fas fa-save mr-2"></i>
                                Upload
                            </button>
                            <button id="removeProfilePicture" class="hidden inline-flex items-center px-4 py-2 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
                                <i class="fas fa-trash mr-2"></i>
                                Remove
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Upload Progress -->
                <div id="uploadProgress" class="hidden mb-4">
                    <div class="bg-gray-200 rounded-full h-2">
                        <div id="progressBar" class="bg-gradient-to-r from-indigo-500 to-purple-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <p id="progressText" class="text-sm text-gray-600 mt-2">Uploading...</p>
                </div>
                
                <!-- Preview -->
                <div id="imagePreview" class="hidden">
                    <h4 class="text-sm font-semibold text-gray-700 mb-2">Preview:</h4>
                    <img id="previewImage" class="h-16 w-16 rounded-lg border-2 border-gray-300 object-cover" alt="Preview">
                </div>
            </div>
        </div>

        <!-- Change Password Card -->
        <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 overflow-hidden hover:shadow-2xl transition-all duration-300">
            <div class="bg-gradient-to-r from-red-500 to-pink-500 px-6 py-4">
                <h2 class="text-xl font-bold text-white flex items-center">
                    <i class="fas fa-key mr-3"></i>
                    Change Password
                </h2>
            </div>
            
            <div class="p-6">
                <form action="/admin/change-password" method="POST" class="space-y-6">
                    <div class="group">
                        <label for="current_password" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center">
                            <i class="fas fa-lock mr-2 text-red-500"></i>Current Password
                        </label>
                        <div class="relative">
                            <input type="password" name="current_password" id="current_password" 
                                   class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white"
                                   required>
                            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                <i class="fas fa-eye text-gray-400 group-hover:text-red-500 transition-colors cursor-pointer" onclick="togglePassword('current_password')"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 gap-6">
                        <div class="group">
                            <label for="new_password" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center">
                                <i class="fas fa-key mr-2 text-green-500"></i>New Password
                            </label>
                            <div class="relative">
                                <input type="password" name="new_password" id="new_password" 
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white"
                                       required>
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                    <i class="fas fa-eye text-gray-400 group-hover:text-green-500 transition-colors cursor-pointer" onclick="togglePassword('new_password')"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="group">
                            <label for="confirm_password" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center">
                                <i class="fas fa-check-circle mr-2 text-blue-500"></i>Confirm New Password
                            </label>
                            <div class="relative">
                                <input type="password" name="confirm_password" id="confirm_password" 
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white"
                                       required>
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                    <i class="fas fa-eye text-gray-400 group-hover:text-blue-500 transition-colors cursor-pointer" onclick="togglePassword('confirm_password')"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Password Strength Indicator -->
                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-4 border border-yellow-200">
                        <h4 class="text-sm font-semibold text-gray-700 mb-2 flex items-center">
                            <i class="fas fa-shield-alt mr-2 text-yellow-500"></i>Password Requirements
                        </h4>
                        <ul class="text-xs text-gray-600 space-y-1">
                            <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>At least 8 characters</li>
                            <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>Include uppercase and lowercase letters</li>
                            <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i>Include at least one number</li>
                        </ul>
                    </div>
                    
                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center">
                        <i class="fas fa-key mr-2"></i>
                        Change Password
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Recent Activity Card -->
    <div class="mt-8 bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 overflow-hidden hover:shadow-2xl transition-all duration-300">
        <div class="bg-gradient-to-r from-emerald-500 to-teal-500 px-6 py-4">
            <h2 class="text-xl font-bold text-white flex items-center">
                <i class="fas fa-history mr-3"></i>
                Recent Activity
            </h2>
        </div>
        
        <div class="p-6">
            <div class="space-y-4">
                <!-- Activity Item 1 -->
                <div class="flex items-center space-x-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 hover:shadow-md transition-all duration-200">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-sign-in-alt text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-semibold text-gray-900">Logged in successfully</p>
                        <p class="text-xs text-gray-500 flex items-center">
                            <i class="fas fa-clock mr-1"></i>
                            2 hours ago
                        </p>
                    </div>
                    <div class="flex-shrink-0">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                            <i class="fas fa-check-circle mr-1"></i>
                            Success
                        </span>
                    </div>
                </div>
                
                <!-- Activity Item 2 -->
                <div class="flex items-center space-x-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100 hover:shadow-md transition-all duration-200">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-upload text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-semibold text-gray-900">Uploaded new media</p>
                        <p class="text-xs text-gray-500 flex items-center">
                            <i class="fas fa-clock mr-1"></i>
                            1 day ago
                        </p>
                    </div>
                    <div class="flex-shrink-0">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                            <i class="fas fa-file-upload mr-1"></i>
                            Media
                        </span>
                    </div>
                </div>
                
                <!-- Activity Item 3 -->
                <div class="flex items-center space-x-4 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border border-purple-100 hover:shadow-md transition-all duration-200">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-user-edit text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-semibold text-gray-900">Updated profile information</p>
                        <p class="text-xs text-gray-500 flex items-center">
                            <i class="fas fa-clock mr-1"></i>
                            3 days ago
                        </p>
                    </div>
                    <div class="flex-shrink-0">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                            <i class="fas fa-edit mr-1"></i>
                            Profile
                        </span>
                    </div>
                </div>
                
                <!-- Activity Item 4 -->
                <div class="flex items-center space-x-4 p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl border border-orange-100 hover:shadow-md transition-all duration-200">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-key text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-semibold text-gray-900">Changed password</p>
                        <p class="text-xs text-gray-500 flex items-center">
                            <i class="fas fa-clock mr-1"></i>
                            1 week ago
                        </p>
                    </div>
                    <div class="flex-shrink-0">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                            <i class="fas fa-shield-alt mr-1"></i>
                            Security
                        </span>
                    </div>
                </div>
            </div>
            
            <!-- View All Activity Button -->
            <div class="mt-6 text-center">
                <button class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 font-medium rounded-xl transition-all duration-200 hover:shadow-md">
                    <i class="fas fa-list mr-2"></i>
                    View All Activity
                </button>
            </div>
        </div>
    </div>
</div>

<script src="/js/profile.js"></script>
